<div *ngIf="shouldDisplay" class="polygon-level-container">
  <svg width="120" height="120" viewBox="0 0 120 120" class="polygon-svg">
    <!-- Center point -->
    <circle
      [attr.cx]="centerX"
      [attr.cy]="centerY"
      r="3"
      fill="gray"
      class="center-point"
    />

    <!-- Background 10 level lines -->
    <g class="background-10">
      <line
        *ngFor="let line of background10Elements.lines; let i = index"
        [attr.x1]="line.x1"
        [attr.y1]="line.y1"
        [attr.x2]="line.x2"
        [attr.y2]="line.y2"
        stroke="darkgray"
        stroke-width="1"
      />
    </g>

    <!-- Background 10 level points -->
    <g class="background-10-points">
      <circle
        *ngFor="let point of background10Elements.points; let i = index"
        [attr.cx]="point.x"
        [attr.cy]="point.y"
        r="3"
        fill="darkgray"
      />
    </g>

    <!-- Background 5 level lines -->
    <g class="background-5">
      <line
        *ngFor="let line of background5Elements.lines; let i = index"
        [attr.x1]="line.x1"
        [attr.y1]="line.y1"
        [attr.x2]="line.x2"
        [attr.y2]="line.y2"
        stroke="lightgray"
        stroke-width="1"
      />
    </g>

    <!-- Background 5 level points -->
    <g class="background-5-points">
      <circle
        *ngFor="let point of background5Elements.points; let i = index"
        [attr.cx]="point.x"
        [attr.cy]="point.y"
        r="3"
        fill="lightgray"
      />
    </g>

    <!-- Foreground (actual data) lines -->
    <g class="foreground">
      <line
        *ngFor="let line of foregroundElements.lines; let i = index"
        [attr.x1]="line.x1"
        [attr.y1]="line.y1"
        [attr.x2]="line.x2"
        [attr.y2]="line.y2"
        stroke="blue"
        stroke-width="2"
        class="data-line"
      />
    </g>

    <!-- Foreground (actual data) points -->
    <g class="foreground-points">
      <circle
        *ngFor="let point of foregroundElements.points; let i = index"
        [attr.cx]="point.x"
        [attr.cy]="point.y"
        r="4"
        fill="blue"
        class="data-point"
      />
    </g>

    <!-- Labels (if provided) -->
    <g *ngIf="labels && labels.length === numPoints" class="labels">
      <text
        *ngFor="let labelText of labels; let i = index"
        [attr.x]="getLabelPosition(i).x"
        [attr.y]="getLabelPosition(i).y - 5"
        font-size="10"
        text-anchor="middle"
        fill="darkgray"
        class="label-text"
      >
        {{ labelText }}
      </text>
    </g>
  </svg>

  <!-- Label for the entire polygon -->
  <div *ngIf="label" class="polygon-label">
    <label>{{ label }}</label>
  </div>
</div>
